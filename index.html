<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€§å¿ƒç†å¥åº·è¯„ä¼°æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 900px;
            width: 90%;
            min-height: 700px;
            overflow: hidden;
            position: relative;
            margin: 20px auto;
        }

        .progress-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-text {
            font-size: 1.1em;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.3);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            transition: width 0.3s ease;
            border-radius: 5px;
        }

        .page {
            display: none;
            padding: 40px;
            text-align: center;
            min-height: 600px;
        }

        .page.active {
            display: block;
        }

        .page h1 {
            color: #764ba2;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .page h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .intro-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #666;
            text-align: left;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .single-question {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .question-number {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.3em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            border: 2px solid #e9ecef;
        }

        .option:hover {
            background-color: #f8f9fa;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .option.selected {
            background-color: #e7f3ff;
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.3);
            accent-color: #667eea;
        }

        .option-label {
            font-size: 1.1em;
            color: #333;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .overview-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
            border-radius: 10px;
        }

        .overview-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            background: white;
        }

        .overview-question:last-child {
            border-bottom: none;
        }

        .overview-question.answered {
            background: #e7f3ff;
        }

        .overview-question.unanswered {
            background: #fff3cd;
        }

        .overview-text {
            flex: 1;
            margin-right: 15px;
            font-size: 0.95em;
        }

        .overview-answer {
            font-weight: bold;
            color: #667eea;
            min-width: 120px;
            text-align: right;
        }

         .radar-chart {
             width: 100%;
             height: auto;
             display: flex;
             justify-content: center;
             align-items: center;
         }

         .radar-chart svg {
             width: 100%;
             height: auto;
         }

        .result-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .result-layout {
            display: flex;
            gap: 30px;
            margin: 20px 0;
            align-items: stretch;
        }

        .result-left {
            flex: 0 0 45%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .result-right {
            flex: 1;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
        }

        .result-right h3 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #667eea;
        }

        .total-score-display {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 30px 0;
        }

        .score-number {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .score-description {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .dimension-score {
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .dimension-score:last-child {
            border-bottom: none;
        }

        .dimension-score-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .dimension-name {
            font-weight: 500;
            color: #333;
        }

        .score-value {
            font-weight: bold;
            color: #764ba2;
            font-size: 1.1em;
        }

        .dimension-progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .dimension-progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-size: 0.75em;
            font-weight: bold;
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9em;
            color: #856404;
        }

        .ai-analysis-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .ai-analysis-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .ai-analysis-header h3 {
            color: #667eea;
            margin: 0;
            font-size: 1.3em;
        }

        .ai-loading {
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ai-analysis-content {
            line-height: 1.8;
            color: #333;
            text-align: left;
        }

        .ai-analysis-content p {
            margin-bottom: 15px;
            text-align: left;
        }

        .ai-analysis-content strong {
            color: #667eea;
            font-weight: 600;
            display: block;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.15em;
        }

        .ai-analysis-content h4 {
            color: #764ba2;
            margin-top: 25px;
            margin-bottom: 12px;
            font-size: 1.15em;
            text-align: left;
        }

        .ai-analysis-content ul,
        .ai-analysis-content ol {
            margin: 15px 0;
            padding-left: 25px;
            text-align: left;
        }

        .ai-analysis-content li {
            margin-bottom: 10px;
            line-height: 1.7;
        }

        .ai-error {
            text-align: center;
            padding: 30px;
            color: #dc3545;
            background: #fff3cd;
            border-radius: 10px;
        }

        .ai-error button {
            margin-top: 15px;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.95em;
        }

        .ai-error button:hover {
            background: #764ba2;
        }

         @media (max-width: 768px) {
             .container {
                 width: 95%;
                 margin: 10px auto;
                 border-radius: 15px;
             }
             
             .page {
                 padding: 25px 20px;
             }
             
             .page h1 {
                 font-size: 1.8em;
             }

             .page h2 {
                 font-size: 1.5em;
             }
             
             .result-layout {
                 flex-direction: column;
                 gap: 20px;
             }

             .result-left {
                 flex: none;
                 width: 100%;
             }

             .result-right {
                 width: 100%;
             }

             .score-number {
                 font-size: 3em;
             }

             .score-label {
                 font-size: 1.2em;
             }

             .navigation {
                 flex-direction: row;
                 gap: 10px;
             }

             .navigation .btn {
                 flex: 1;
                 padding: 12px 20px;
                 font-size: 1em;
                 margin: 0;
             }

             .option {
                 padding: 15px;
             }

             .option-label {
                 font-size: 1em;
             }

             .question-text {
                 font-size: 1.1em;
                 padding: 20px;
             }

             .question-number {
                 font-size: 1em;
             }

             .progress-header {
                 padding: 15px;
             }

             .progress-text {
                 font-size: 0.95em;
             }

             .total-score-display {
                 padding: 30px 20px;
             }

             .intro-text {
                 font-size: 1em;
             }

             .overview-container {
                 max-height: 300px;
             }

             .overview-text {
                 font-size: 0.9em;
             }

             .overview-answer {
                 font-size: 0.85em;
                 min-width: 100px;
             }

             .result-section {
                 padding: 20px;
             }

             .dimension-progress-bar {
                 height: 18px;
             }

             .ai-analysis-section {
                 padding: 20px;
                 margin: 20px 0;
             }

             .ai-analysis-header h3 {
                 font-size: 1.1em;
             }
         }

         @media (max-width: 480px) {
             .container {
                 width: 100%;
                 margin: 0;
                 border-radius: 0;
                 min-height: 100vh;
             }

             body {
                 padding: 0;
             }

             .page {
                 padding: 20px 15px;
                 min-height: calc(100vh - 80px);
             }

             .page h1 {
                 font-size: 1.6em;
                 margin-bottom: 20px;
             }

             .page h2 {
                 font-size: 1.3em;
             }

             .intro-text {
                 font-size: 0.95em;
             }

             .intro-text ul {
                 margin: 15px 0;
                 padding-left: 18px;
             }

             .question-text {
                 font-size: 1em;
                 padding: 18px;
             }

             .option {
                 padding: 12px 15px;
             }

             .option input[type="radio"] {
                 transform: scale(1.1);
                 margin-right: 12px;
             }

             .option-label {
                 font-size: 0.95em;
             }

             .navigation .btn {
                 padding: 12px 15px;
                 font-size: 0.95em;
             }

             .radar-chart {
                 max-width: 320px;
                 margin: 15px auto;
             }

             .score-number {
                 font-size: 2.5em;
             }

             .score-label {
                 font-size: 1.1em;
             }

             .score-description {
                 font-size: 0.95em;
             }

             .total-score-display {
                 padding: 25px 15px;
                 margin: 20px 0;
             }

             .result-section h3 {
                 font-size: 1.1em;
             }

             .dimension-name {
                 font-size: 0.9em;
             }

             .score-value {
                 font-size: 1em;
             }

             .dimension-progress-bar {
                 height: 16px;
             }

             .overview-container {
                 max-height: 250px;
             }

             .overview-question {
                 padding: 12px 15px;
                 flex-direction: column;
                 align-items: flex-start;
                 gap: 8px;
             }

             .overview-text {
                 margin-right: 0;
                 font-size: 0.85em;
             }

             .overview-answer {
                 text-align: left;
                 min-width: auto;
                 font-size: 0.8em;
             }

             .progress-header {
                 padding: 12px 15px;
             }

             .progress-text {
                 font-size: 0.85em;
             }

             .disclaimer {
                 font-size: 0.85em;
                 padding: 12px;
             }

             .btn {
                 padding: 12px 30px;
                 font-size: 1em;
             }

             .ai-analysis-section {
                 padding: 15px;
                 margin: 20px 0;
             }

             .ai-analysis-header h3 {
                 font-size: 1em;
             }

             .ai-analysis-content {
                 font-size: 0.9em;
                 line-height: 1.6;
             }

             .ai-loading {
                 padding: 30px 20px;
             }
         }
    </style>
</head>
<body>
    <div class="container">
        <!-- è¿›åº¦æ¡å¤´éƒ¨ -->
        <div class="progress-header" id="progress-header" style="display: none;">
            <div class="progress-info">
                <span class="progress-text" id="progress-text">é¢˜ç›® 1 / 25</span>
                <span class="progress-text" id="progress-percentage">4%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- å¼€å§‹é¡µé¢ -->
        <div id="start-page" class="page active">
            <h1>æ€§å¿ƒç†å¥åº·è¯„ä¼°æµ‹è¯•</h1>
            <div class="intro-text">
                <p>æ¬¢è¿å‚ä¸æœ¬æ¬¡æ€§å¿ƒç†å¥åº·è¯„ä¼°æµ‹è¯•ã€‚æœ¬æµ‹è¯•æ—¨åœ¨å¸®åŠ©æ‚¨äº†è§£è‡ªå·±åœ¨æ€§å¿ƒç†æ–¹é¢çš„å¥åº·çŠ¶å†µï¼ŒåŒ…å«25ä¸ªé—®é¢˜ï¼Œæ¶µç›–5ä¸ªé‡è¦ç»´åº¦ï¼š</p>
                <ul style="margin: 20px 0; padding-left: 20px;">
                    <li><strong>è§‚å¿µç¾è€»æ„Ÿ</strong> - å¯¹æ€§æœ¬èº«çš„å†…åŒ–ç¾è€»ä¸é“å¾·è´Ÿæ‹…</li>
                    <li><strong>èº«ä½“æ¥çº³åº¦</strong> - å¯¹èº«ä½“å½¢è±¡åŠæ€§æ„Ÿå—çš„æ¥çº³ä¸èˆ’é€‚ç¨‹åº¦</li>
                    <li><strong>æ²Ÿé€šè‡ªä¸»æ€§</strong> - åœ¨æ€§å…³ç³»ä¸­è¡¨è¾¾éœ€æ±‚ä¸è®¾ç«‹è¾¹ç•Œçš„èƒ½åŠ›</li>
                    <li><strong>æ¬²æœ›è‡ªä¸»æ€§</strong> - å¯¹è‡ªèº«æ€§æ¬²å’Œæ„‰æ‚¦çš„ä¸»åŠ¨è®¤åŒä¸è¿½æ±‚</li>
                    <li><strong>çŸ¥è¯†å¼€æ”¾æ€§</strong> - å¯¹æ€§çŸ¥è¯†çš„æ€åº¦å’Œè·å–è¡Œä¸ºçš„å¼€æ”¾ç¨‹åº¦</li>
                </ul>
                <p>è¯·æ ¹æ®æ‚¨è¿‡å»å…­ä¸ªæœˆå†…çš„çœŸå®æ„Ÿå—å’Œç»å†ï¼Œè¯šå®å›ç­”æ¯ä¸ªé—®é¢˜ã€‚æµ‹è¯•å¤§çº¦éœ€è¦10-15åˆ†é’Ÿå®Œæˆã€‚</p>
            </div>
            <button class="btn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
            <div class="disclaimer">
                <strong>å…è´£å£°æ˜ï¼š</strong>æœ¬æµ‹è¯•ä»…ä¸ºä¸€ç§è‡ªæˆ‘æ¢ç´¢å·¥å…·ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„å¿ƒç†æˆ–åŒ»å­¦è¯Šæ–­ã€‚å¦‚æœæ‚¨æ„Ÿåˆ°æåº¦å›°æ‰°ï¼Œè¯·åŠ¡å¿…å¯»æ±‚åˆæ ¼çš„å¿ƒç†å’¨è¯¢å¸ˆæˆ–åŒ»ç”Ÿçš„å¸®åŠ©ã€‚
            </div>
        </div>

        <!-- å•é¢˜æµ‹è¯•é¡µé¢ -->
        <div id="question-page" class="page">
            <div class="single-question">
                <div class="question-number" id="question-number">é¢˜ç›® 1 / 25</div>
                <div class="question-text" id="question-text"></div>
                <div class="options" id="question-options"></div>
                <div class="navigation">
                    <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()" disabled>ä¸Šä¸€é¢˜</button>
                    <button class="btn" id="next-btn" onclick="nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
                </div>
            </div>
        </div>

        <!-- ç­”é¢˜æ€»è§ˆé¡µé¢ -->
        <div id="overview-page" class="page">
            <h2>ç­”é¢˜æ€»è§ˆ</h2>
            <p style="margin-bottom: 20px; color: #666;">è¯·æ£€æŸ¥æ‚¨çš„ç­”æ¡ˆï¼Œç¡®è®¤æ— è¯¯åç‚¹å‡»"è¿›è¡Œåˆ†æ"æŒ‰é’®ã€‚</p>
            <div class="overview-container" id="overview-container"></div>
            <div style="text-align: center;">
                <button class="btn btn-secondary" onclick="backToQuestion()">è¿”å›ç­”é¢˜</button>
                <button class="btn" onclick="analyzeResults()" id="analyze-btn">è¿›è¡Œåˆ†æ</button>
            </div>
        </div>

        <!-- ç»“æœé¡µé¢ -->
        <div id="result-page" class="page">
            <h2>æ‚¨çš„æµ‹è¯•ç»“æœ</h2>
            
            <div class="total-score-display">
                <div class="score-number" id="total-score-number">-</div>
                <div class="score-label" id="score-label">æ€§å‹æŠ‘ç¨‹åº¦</div>
                <div class="score-description" id="score-description">-</div>
            </div>
            
            <div class="result-layout">
                <div class="result-left">
                    <div class="radar-chart" id="radar-chart-container">
                        <!-- SVGé›·è¾¾å›¾å°†åœ¨æ­¤å¤„ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="result-right">
                    <h3>å„ç»´åº¦è¯¦ç»†å¾—åˆ†</h3>
                    <div id="dimension-scores"></div>
                </div>
            </div>
            
            <!-- AIæ·±åº¦åˆ†æåŒºåŸŸ -->
            <div class="ai-analysis-section">
                <div class="ai-analysis-header">
                    <h3>ğŸ¤– AIä¸ªæ€§åŒ–æ·±åº¦åˆ†æ</h3>
                </div>
                <div id="ai-analysis-container">
                    <!-- AIåˆ†æå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
            
            <div class="disclaimer">
                <strong>å…è´£å£°æ˜ï¼š</strong>æœ¬æµ‹è¯•ç»“æœä¸ºè‡ªæˆ‘è¯„ä¼°å‚è€ƒï¼Œ<strong>ä¸èƒ½</strong>ä½œä¸ºä»»ä½•ä¸“ä¸šçš„å¿ƒç†è¯Šæ–­ä¾æ®ã€‚å¦‚æœæµ‹è¯•ç»“æœè®©ä½ æ„Ÿåˆ°å›°æ‰°ï¼Œæˆ–è¿™äº›ç‰¹è´¨ä¸¥é‡å½±å“äº†ä½ çš„ç”Ÿæ´»ä¸äººé™…å…³ç³»ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆçš„è¯„ä¼°å’Œå¸®åŠ©ã€‚
            </div>
        </div>
    </div>

    <script>
        // æµ‹è¯•é¢˜ç›®æ•°æ®
        const questions = [
            { id: 1, text: "æˆ‘å¸¸å¸¸è§‰å¾—æœ‰æ€§æ¬²æœ›æˆ–æ€§å¹»æƒ³æ˜¯ä¸€ä»¶ä»¤äººç¾è€»çš„äº‹æƒ…ã€‚", dimension: "è§‚å¿µç¾è€»æ„Ÿ", reverse: false },
            { id: 2, text: "æˆ‘èƒ½å¤Ÿè‡ªç„¶åœ°æ¬£èµå’Œæ¥çº³è‡ªå·±èº«ä½“çš„ç§å¯†éƒ¨ä½ã€‚", dimension: "èº«ä½“æ¥çº³åº¦", reverse: false },
            { id: 3, text: "æˆ‘å¾ˆéš¾å‘ä¼´ä¾£æ¸…æ¥šè¡¨è¾¾æˆ‘åœ¨æ€§è¡Œä¸ºä¸­å–œæ¬¢ä»€ä¹ˆã€ä¸å–œæ¬¢ä»€ä¹ˆã€‚", dimension: "æ²Ÿé€šè‡ªä¸»æ€§", reverse: true },
            { id: 4, text: "å½“æˆ‘äº§ç”Ÿæ€§æ¬²æ—¶ï¼Œæˆ‘é€šå¸¸ä¼šä¸»åŠ¨å¯»æ±‚æ»¡è¶³ï¼ˆå¦‚è‡ªæ…°æˆ–ä¸ä¼´ä¾£äº²å¯†ï¼‰ï¼Œè€Œä¸æ˜¯åˆ»æ„å‹æŠ‘æˆ–å¿½ç•¥å®ƒã€‚", dimension: "æ¬²æœ›è‡ªä¸»æ€§", reverse: false },
            { id: 5, text: "æˆ‘ä¼šä¸»åŠ¨é€šè¿‡å„ç§æ¸ é“ï¼ˆå¦‚ä¹¦ç±ã€è¯¾ç¨‹ã€å¯é ç½‘ç«™ï¼‰å»å­¦ä¹ æ€§çŸ¥è¯†ã€‚", dimension: "çŸ¥è¯†å¼€æ”¾æ€§", reverse: false },
            { id: 6, text: "æˆ‘è®¤ä¸º'å¥½å¥³å­©'æˆ–'å¥½ç”·å­©'ä¸åº”è¯¥æœ‰å¤ªå¼ºçš„æ€§æ¬²ã€‚", dimension: "è§‚å¿µç¾è€»æ„Ÿ", reverse: true },
            { id: 7, text: "åœ¨å‘ç”Ÿæ€§è¡Œä¸ºæ—¶ï¼Œæˆ‘ä¼šå› ä¸ºæ‹…å¿ƒèº«æä¸å¥½è€Œæ„Ÿåˆ°ç„¦è™‘å’Œåˆ†å¿ƒã€‚", dimension: "èº«ä½“æ¥çº³åº¦", reverse: true },
            { id: 8, text: "å³ä½¿æ„Ÿåˆ°ä¸èˆ’æœæˆ–ä¸æƒ³ç»§ç»­ï¼Œæˆ‘ä¹Ÿå¾ˆéš¾åœ¨æ€§è¡Œä¸ºè¿‡ç¨‹ä¸­å¯¹ä¼´ä¾£è¯´'ä¸'ã€‚", dimension: "æ²Ÿé€šè‡ªä¸»æ€§", reverse: true },
            { id: 9, text: "æˆ‘ä¼šå› ä¸ºè‡ªæ…°è€Œæ„Ÿåˆ°å†…ç–šæˆ–è‡ªè´£ã€‚", dimension: "æ¬²æœ›è‡ªä¸»æ€§", reverse: true },
            { id: 10, text: "æˆ‘è®¤ä¸ºå…¬å¼€è°ˆè®ºæ€§è¯é¢˜æ˜¯å°´å°¬å’Œä¸ä½“é¢çš„ã€‚", dimension: "çŸ¥è¯†å¼€æ”¾æ€§", reverse: true },
            { id: 11, text: "æˆ‘æ‹…å¿ƒè‡ªå·±åœ¨æ€§æ–¹é¢çš„è¡¨ç°è¾¾ä¸åˆ°ä¼´ä¾£æˆ–ç¤¾ä¼šçš„æœŸæœ›ã€‚", dimension: "è§‚å¿µç¾è€»æ„Ÿ", reverse: false },
            { id: 12, text: "åœ¨äº²å¯†æ¥è§¦ä¸­ï¼Œæˆ‘èƒ½å…¨èº«å¿ƒæŠ•å…¥å¹¶äº«å—å½“ä¸‹çš„å¿«æ„Ÿï¼Œè€Œä¸æ˜¯èƒ¡æ€ä¹±æƒ³ã€‚", dimension: "èº«ä½“æ¥çº³åº¦", reverse: false },
            { id: 13, text: "å½“ä¼´ä¾£æå‡ºæ–°çš„æ€§çˆ±æ–¹å¼æˆ–å°è¯•æ—¶ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”é€šå¸¸æ˜¯å¼€æ”¾å’Œå¥½å¥‡ï¼Œè€Œéæ’æ–¥å’Œæ‹’ç»ã€‚", dimension: "æ²Ÿé€šè‡ªä¸»æ€§", reverse: false },
            { id: 14, text: "æˆ‘è®¤ä¸ºè¿½æ±‚æ€§çš„æ„‰æ‚¦æ˜¯ä¸ªäººç”Ÿæ´»ä¸­é‡è¦ä¸”æ­£å½“çš„ä¸€éƒ¨åˆ†ã€‚", dimension: "æ¬²æœ›è‡ªä¸»æ€§", reverse: false },
            { id: 15, text: "å½“æˆ‘çœ‹åˆ°åª’ä½“ä¸­å¼€æ”¾çš„æ€§è¡¨è¾¾å†…å®¹æ—¶ï¼Œä¼šæ„Ÿåˆ°åæ„Ÿå’Œä¸é€‚ã€‚", dimension: "è§‚å¿µç¾è€»æ„Ÿ", reverse: false },
            { id: 16, text: "æˆ‘å¯¹è‡ªå·±èº«ä½“çš„æ€§æ•æ„Ÿåœ°å¸¦ï¼ˆå¦‚å“ªäº›éƒ¨ä½è¢«è§¦æ‘¸ä¼šå¸¦æ¥å¿«æ„Ÿï¼‰æœ‰æ¸…æ™°çš„äº†è§£ã€‚", dimension: "èº«ä½“æ¥çº³åº¦", reverse: false },
            { id: 17, text: "æˆ‘å®³æ€•åœ¨æ€§è¡Œä¸ºä¸­'å‡ºä¸‘'æˆ–'åšé”™äº‹'ã€‚", dimension: "çŸ¥è¯†å¼€æ”¾æ€§", reverse: true },
            { id: 18, text: "æˆ‘å¯ä»¥è‡ªä¸»å†³å®šæ˜¯å¦å‘ç”Ÿæ€§è¡Œä¸ºï¼Œè€Œå¾ˆå°‘å—åˆ°ä¼´ä¾£å‹åŠ›æˆ–ç¤¾ä¼šè§‚å¿µçš„å½±å“ã€‚", dimension: "æ²Ÿé€šè‡ªä¸»æ€§", reverse: false },
            { id: 19, text: "æˆ‘è®¤ä¸ºæ€§ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ä¼´ä¾£æˆ–ç»´ç³»å…³ç³»ï¼Œè€Œä¸æ˜¯ä¸ºäº†è‡ªå·±çš„å¿«ä¹ã€‚", dimension: "æ¬²æœ›è‡ªä¸»æ€§", reverse: true },
            { id: 20, text: "æˆ‘ä¼šå› ä¸ºè‡ªå·±æŸç§ç‰¹æ®Šçš„æ€§åå¥½æˆ–æ€§å¹»æƒ³è€Œæ„Ÿåˆ°å›°æ‰°ã€‚", dimension: "è§‚å¿µç¾è€»æ„Ÿ", reverse: false },
            { id: 21, text: "åœ¨è´­ä¹°æƒ…è¶£ç”¨å“æˆ–é¿å­•äº§å“æ—¶ï¼Œæˆ‘ä¼šæ„Ÿåˆ°éå¸¸è‡ªåœ¨ã€‚", dimension: "æ²Ÿé€šè‡ªä¸»æ€§", reverse: false },
            { id: 22, text: "æˆ‘å¸¸å¸¸åœ¨æ€§è¡Œä¸ºåæ„Ÿåˆ°åæ‚”ã€ç©ºè™šæˆ–æ²®ä¸§ã€‚", dimension: "èº«ä½“æ¥çº³åº¦", reverse: true },
            { id: 23, text: "æˆ‘è®¤ä¸ºæ€§çˆ±ä¸æƒ…æ„Ÿæ˜¯å¯ä»¥åˆ†ç¦»çš„ï¼Œè¿™å¯¹æˆ‘æ¥è¯´ä¸æ˜¯é—®é¢˜ã€‚", dimension: "æ¬²æœ›è‡ªä¸»æ€§", reverse: false },
            { id: 24, text: "å½“æˆ‘ä¸æœ‹å‹è®¨è®ºåˆ°ä¸æ€§ç›¸å…³çš„è¯é¢˜æ—¶ï¼Œä¼šæ„Ÿåˆ°éå¸¸è‡ªç„¶ã€‚", dimension: "çŸ¥è¯†å¼€æ”¾æ€§", reverse: false },
            { id: 25, text: "æˆ‘æ¸…æ¥šåœ°çŸ¥é“å¦‚ä½•è®©è‡ªå·±è·å¾—æ€§é«˜æ½®ã€‚", dimension: "çŸ¥è¯†å¼€æ”¾æ€§", reverse: false }
        ];

        // é€‰é¡¹æ ‡ç­¾
        const options = [
            { value: 1, label: "éå¸¸ä¸ç¬¦åˆ" },
            { value: 2, label: "ä¸å¤ªç¬¦åˆ" },
            { value: 3, label: "ä¸€èˆ¬/ä¸ç¡®å®š" },
            { value: 4, label: "æ¯”è¾ƒç¬¦åˆ" },
            { value: 5, label: "éå¸¸ç¬¦åˆ" }
        ];

        // ç»´åº¦é…ç½®
        const dimensions = {
            "è§‚å¿µç¾è€»æ„Ÿ": { questions: [1, 6, 11, 15, 20], color: "#FF6B6B" },
            "èº«ä½“æ¥çº³åº¦": { questions: [2, 7, 12, 16, 22], color: "#4ECDC4" },
            "æ²Ÿé€šè‡ªä¸»æ€§": { questions: [3, 8, 13, 18, 21], color: "#45B7D1" },
            "æ¬²æœ›è‡ªä¸»æ€§": { questions: [4, 9, 14, 19, 23], color: "#96CEB4" },
            "çŸ¥è¯†å¼€æ”¾æ€§": { questions: [5, 10, 17, 24, 25], color: "#FFEAA7" }
        };

        // å…¨å±€å˜é‡
        let answers = {};
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let isTransitioning = false; // é˜²æ­¢è·³è½¬æœŸé—´é‡å¤ç‚¹å‡»

        // å¼€å§‹æµ‹è¯•
        function startTest() {
            // éšæœºæ‰“ä¹±é¢˜ç›®é¡ºåº
            shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            answers = {};
            
            // æ˜¾ç¤ºè¿›åº¦æ¡å’Œé—®é¢˜é¡µé¢
            document.getElementById('progress-header').style.display = 'block';
            showPage('question-page');
            renderCurrentQuestion();
            updateProgress();
        }

        // æ˜¾ç¤ºé¡µé¢
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            // éšè—è¿›åº¦æ¡ï¼ˆé™¤äº†é—®é¢˜é¡µé¢å’Œæ€»è§ˆé¡µé¢ï¼‰
            if (pageId === 'start-page' || pageId === 'result-page') {
                document.getElementById('progress-header').style.display = 'none';
            } else {
                document.getElementById('progress-header').style.display = 'block';
            }
        }

        // æ¸²æŸ“å½“å‰é—®é¢˜
        function renderCurrentQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            
            // æ›´æ–°é—®é¢˜ç¼–å·å’Œæ–‡æœ¬
            document.getElementById('question-number').textContent = `é¢˜ç›® ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('question-text').textContent = question.text;
            
            // æ¸²æŸ“é€‰é¡¹
            const optionsContainer = document.getElementById('question-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(option => {
                const optionDiv = document.createElement('label');
                optionDiv.className = 'option';
                
                const isSelected = answers[question.id] === option.value;
                if (isSelected) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.innerHTML = `
                    <input type="radio" name="current-question" value="${option.value}" ${isSelected ? 'checked' : ''}>
                    <span class="option-label">${option.label}</span>
                `;
                
                // åªç›‘å¬labelçš„ç‚¹å‡»äº‹ä»¶ï¼Œé˜²æ­¢é‡å¤è§¦å‘
                optionDiv.addEventListener('click', (e) => {
                    e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
                    selectOption(question.id, option.value);
                });
                
                optionsContainer.appendChild(optionDiv);
            });
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            updateNavigationButtons();
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(questionId, value) {
            // å¦‚æœæ­£åœ¨è·³è½¬ä¸­ï¼Œå¿½ç•¥ç‚¹å‡»
            if (isTransitioning) {
                console.log('æ­£åœ¨è·³è½¬ä¸­ï¼Œå¿½ç•¥æœ¬æ¬¡ç‚¹å‡»');
                return;
            }
            
            // ä¿å­˜ç­”æ¡ˆ
            answers[questionId] = parseInt(value);
            
            console.log(`é€‰æ‹©é¢˜ç›®ID: ${questionId}, å€¼: ${value}, å½“å‰é¢˜ç›®ç´¢å¼•: ${currentQuestionIndex}`);
            console.log('å½“å‰æ‰€æœ‰ç­”æ¡ˆ:', answers);
            
            // æ›´æ–°é€‰é¡¹æ ·å¼
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            const selectedOption = document.querySelector(`input[value="${value}"]`).closest('.option');
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // æ›´æ–°å•é€‰æŒ‰é’®
            document.querySelector(`input[value="${value}"]`).checked = true;
            
            // æ›´æ–°è¿›åº¦å’ŒæŒ‰é’®çŠ¶æ€
            updateProgress();
            updateNavigationButtons();
            
            // è®¾ç½®è·³è½¬æ ‡å¿—
            isTransitioning = true;
            
            // è‡ªåŠ¨è·³è½¬é€»è¾‘ï¼ˆå»¶è¿Ÿ300msï¼Œè®©ç”¨æˆ·çœ‹åˆ°é€‰æ‹©æ•ˆæœï¼‰
            setTimeout(() => {
                // åˆ¤æ–­æ˜¯å¦ä¸ºæœ€åä¸€é¢˜ï¼ˆç´¢å¼•ä»0å¼€å§‹ï¼Œæ‰€ä»¥æœ€åä¸€é¢˜ç´¢å¼•æ˜¯questions.length - 1ï¼‰
                const isLastQuestion = currentQuestionIndex === questions.length - 1;
                
                if (isLastQuestion) {
                    // æœ€åä¸€é¢˜ï¼Œè·³è½¬åˆ°æ€»è§ˆ
                    console.log('è¿™æ˜¯æœ€åä¸€é¢˜ï¼Œè¿›å…¥æ€»è§ˆ');
                    showOverview();
                } else {
                    // ä¸æ˜¯æœ€åä¸€é¢˜ï¼Œè·³è½¬åˆ°ä¸‹ä¸€é¢˜
                    console.log(`ä¸æ˜¯æœ€åä¸€é¢˜ï¼Œè·³è½¬åˆ°ä¸‹ä¸€é¢˜ã€‚å½“å‰ç´¢å¼•: ${currentQuestionIndex}, ä¸‹ä¸€é¢˜ç´¢å¼•: ${currentQuestionIndex + 1}`);
                    currentQuestionIndex++;
                    renderCurrentQuestion();
                    updateProgress();
                }
                
                // è·³è½¬å®Œæˆï¼Œé‡ç½®æ ‡å¿—
                isTransitioning = false;
            }, 300);
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const answeredCount = Object.keys(answers).length;
            const progress = (answeredCount / questions.length) * 100;
            
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `é¢˜ç›® ${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('progress-percentage').textContent = Math.round(progress) + '%';
        }

        // æ›´æ–°å¯¼èˆªæŒ‰é’®
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            // ä¸Šä¸€é¢˜æŒ‰é’®
            prevBtn.disabled = currentQuestionIndex === 0;
            
            // ä¸‹ä¸€é¢˜æŒ‰é’®
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const hasAnswer = answers[currentQuestion.id] !== undefined;
            
            if (currentQuestionIndex === questions.length - 1) {
                // æœ€åä¸€é¢˜
                nextBtn.textContent = hasAnswer ? 'æŸ¥çœ‹æ€»è§ˆ' : 'ä¸‹ä¸€é¢˜';
                nextBtn.disabled = false;
            } else {
                nextBtn.textContent = 'ä¸‹ä¸€é¢˜';
                nextBtn.disabled = !hasAnswer;
            }
        }

        // ä¸Šä¸€é¢˜
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderCurrentQuestion();
                updateProgress();
            }
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            
            if (currentQuestionIndex === questions.length - 1) {
                // æœ€åä¸€é¢˜ï¼Œè¿›å…¥æ€»è§ˆ
                showOverview();
            } else if (answers[currentQuestion.id] !== undefined) {
                // æœ‰ç­”æ¡ˆï¼Œè¿›å…¥ä¸‹ä¸€é¢˜
                currentQuestionIndex++;
                renderCurrentQuestion();
                updateProgress();
            }
        }

        // æ˜¾ç¤ºç­”é¢˜æ€»è§ˆ
        function showOverview() {
            showPage('overview-page');
            renderOverview();
        }

        // æ¸²æŸ“ç­”é¢˜æ€»è§ˆ
        function renderOverview() {
            const container = document.getElementById('overview-container');
            container.innerHTML = '';
            
            console.log('æ¸²æŸ“æ€»è§ˆï¼Œå½“å‰æ‰€æœ‰ç­”æ¡ˆ:', answers);
            console.log('é¢˜ç›®æ€»æ•°:', shuffledQuestions.length);
            
            shuffledQuestions.forEach((question, index) => {
                const hasAnswer = answers[question.id] !== undefined;
                let answerText = 'æœªå›ç­”';
                
                if (hasAnswer) {
                    const answerValue = answers[question.id];
                    const option = options.find(opt => opt.value === answerValue);
                    answerText = option ? option.label : 'æœªå›ç­”';
                }
                
                console.log(`é¢˜ç›®${index + 1} (ID:${question.id}): ${hasAnswer ? 'å·²å›ç­”' : 'æœªå›ç­”'} - ${answerText}`);
                
                const questionDiv = document.createElement('div');
                questionDiv.className = `overview-question ${hasAnswer ? 'answered' : 'unanswered'}`;
                questionDiv.innerHTML = `
                    <div class="overview-text">${index + 1}. ${question.text}</div>
                    <div class="overview-answer">${answerText}</div>
                `;
                
                // ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”é¢˜ç›®
                questionDiv.addEventListener('click', () => {
                    currentQuestionIndex = index;
                    showPage('question-page');
                    renderCurrentQuestion();
                });
                
                container.appendChild(questionDiv);
            });
            
            const answeredCount = Object.keys(answers).length;
            console.log(`æ€»è§ˆé¡µé¢ï¼šå·²å›ç­” ${answeredCount}/${questions.length} é¢˜`);
        }

        // è¿”å›ç­”é¢˜
        function backToQuestion() {
            showPage('question-page');
            renderCurrentQuestion();
        }

        // åˆ†æç»“æœ
        function analyzeResults() {
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é¢˜ç›®éƒ½å·²å›ç­”
            if (Object.keys(answers).length < questions.length) {
                alert('è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®åå†è¿›è¡Œåˆ†æï¼');
                return;
            }

            // è®¡ç®—ç»“æœ
            const results = calculateResults();
            showResults(results);
            showPage('result-page');
        }

        // è®¡ç®—ç»“æœ
        function calculateResults() {
            const dimensionScores = {};
            
            // è®¡ç®—å„ç»´åº¦å¾—åˆ†
            Object.keys(dimensions).forEach(dimensionName => {
                const questionIds = dimensions[dimensionName].questions;
                let totalScore = 0;
                
                questionIds.forEach(questionId => {
                    const question = questions.find(q => q.id === questionId);
                    let score = answers[questionId];
                    
                    // åå‘è®¡åˆ†
                    if (question.reverse) {
                        score = 6 - score;
                    }
                    
                    totalScore += score;
                });
                
                dimensionScores[dimensionName] = totalScore / questionIds.length;
            });

            // è®¡ç®—æ€»åˆ†
            const totalScore = Object.values(dimensionScores).reduce((sum, score) => sum + score, 0) / Object.keys(dimensionScores).length;

            return {
                total: totalScore,
                dimensions: dimensionScores
            };
        }

        // æ˜¾ç¤ºç»“æœ
        function showResults(results) {
            // å°†åˆ†æ•°å½’ä¸€åŒ–åˆ°0-100
            const normalizedScore = Math.round(((results.total - 1) / 4) * 100);
            
            // æ˜¾ç¤ºå½’ä¸€åŒ–åˆ†æ•°
            document.getElementById('total-score-number').textContent = normalizedScore;
            
            // æ ¹æ®åˆ†æ•°ç¡®å®šç­‰çº§å’Œæè¿°
            let level, description, color;
            if (normalizedScore <= 33) {
                level = 'è½»å¾®';
                description = 'æ‚¨é€šå¸¸å¯¹æ€§æŒæœ‰å¥åº·ã€å¼€æ”¾å’Œç§¯æçš„æ€åº¦ï¼Œèƒ½è¾ƒå¥½åœ°åè°ƒå†…åœ¨æ¬²æœ›ä¸å¤–éƒ¨ç¯å¢ƒçš„å…³ç³»ã€‚';
                color = '#28a745';
            } else if (normalizedScore <= 66) {
                level = 'ä¸­ç­‰';
                description = 'æ‚¨åœ¨æŸäº›æƒ…å¢ƒæˆ–ç»´åº¦ä¸‹æ„Ÿåˆ°å›°æ‰°ï¼Œè¿™æ˜¯å¤§å¤šæ•°äººçš„å¸¸æ€ã€‚å¯ä»¥é€šè¿‡è‡ªæˆ‘è§‰å¯Ÿã€ä¸ä¼´ä¾£æ²Ÿé€šå’Œå­¦ä¹ æ¥æ”¹å–„ã€‚';
                color = '#ffc107';
            } else {
                level = 'è¾ƒé«˜';
                description = 'æ‚¨å¯èƒ½åœ¨å¤šä¸ªæ–¹é¢æ„Ÿåˆ°æ˜¾è‘—çš„å†²çªå’ŒæŠ‘åˆ¶ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢æˆ–æ€§æ•™è‚²èµ„æºçš„å¸®åŠ©ã€‚';
                color = '#dc3545';
            }
            
            
            document.getElementById('score-label').textContent = `${level} æ€§å‹æŠ‘ç¨‹åº¦`;
            document.getElementById('score-description').textContent = description;
            
            // æ›´æ–°åˆ†æ•°æ˜¾ç¤ºé¢œè‰²
            const scoreDisplay = document.querySelector('.total-score-display');
            scoreDisplay.style.background = `linear-gradient(135deg, ${color} 0%, ${color}dd 100%)`;

            // æ˜¾ç¤ºå„ç»´åº¦å¾—åˆ†ï¼ˆä¹Ÿå½’ä¸€åŒ–åˆ°0-100ï¼‰
            const dimensionScoresContainer = document.getElementById('dimension-scores');
            dimensionScoresContainer.innerHTML = '';
            
            Object.keys(results.dimensions).forEach(dimension => {
                const score = results.dimensions[dimension];
                const normalizedDimensionScore = Math.round(((score - 1) / 4) * 100);
                
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'dimension-score';
                scoreDiv.innerHTML = `
                    <div class="dimension-score-header">
                        <span class="dimension-name">${dimension}ï¼š</span>
                        <span class="score-value">${normalizedDimensionScore}</span>
                    </div>
                    <div class="dimension-progress-bar">
                        <div class="dimension-progress-fill" style="width: ${normalizedDimensionScore}%">
                            ${normalizedDimensionScore >= 10 ? normalizedDimensionScore : ''}
                        </div>
                    </div>
                `;
                dimensionScoresContainer.appendChild(scoreDiv);
            });

            // ç»˜åˆ¶é›·è¾¾å›¾
            drawRadarChart(results.dimensions);
            
            // ç”ŸæˆAIåˆ†æ
            generateAIAnalysis(results);
        }

         // ç»˜åˆ¶é›·è¾¾å›¾ (SVGç‰ˆæœ¬)
         function drawRadarChart(dimensionScores) {
             const container = document.getElementById('radar-chart-container');
             const padding = 35; // è¿›ä¸€æ­¥å‡å°‘è¾¹è·
             const svgSize = 360 + padding * 2; // ä¼˜åŒ–æ€»å°ºå¯¸
             const centerX = svgSize / 2;
             const centerY = svgSize / 2;
             const radius = 150; // é›·è¾¾å›¾åŠå¾„
             const labelDistance = radius + 30; // æ ‡ç­¾è·ç¦»ï¼Œç¡®ä¿ä¸é®æŒ¡

             const dimensionNames = Object.keys(dimensionScores);
             const angleStep = (2 * Math.PI) / dimensionNames.length;

             // åˆ›å»ºSVGå…ƒç´ 
             const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
             svg.setAttribute('viewBox', `0 0 ${svgSize} ${svgSize}`);
             svg.setAttribute('width', '100%');
             svg.setAttribute('height', '100%');
             svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

             // ç»˜åˆ¶åŒå¿ƒåœ†ï¼ˆèƒŒæ™¯ç½‘æ ¼ï¼‰
             for (let i = 1; i <= 5; i++) {
                 const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                 circle.setAttribute('cx', centerX);
                 circle.setAttribute('cy', centerY);
                 circle.setAttribute('r', (radius * i) / 5);
                 circle.setAttribute('fill', 'none');
                 circle.setAttribute('stroke', '#e9ecef');
                 circle.setAttribute('stroke-width', '1');
                 svg.appendChild(circle);
             }

             // ç»˜åˆ¶è½´çº¿
             dimensionNames.forEach((_, index) => {
                 const angle = index * angleStep - Math.PI / 2;
                 const x = centerX + Math.cos(angle) * radius;
                 const y = centerY + Math.sin(angle) * radius;
                 
                 const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                 line.setAttribute('x1', centerX);
                 line.setAttribute('y1', centerY);
                 line.setAttribute('x2', x);
                 line.setAttribute('y2', y);
                 line.setAttribute('stroke', '#e9ecef');
                 line.setAttribute('stroke-width', '1');
                 svg.appendChild(line);
             });

             // ç»˜åˆ¶åˆ†æ•°æ ‡ç­¾ï¼ˆæ˜¾ç¤ºå½’ä¸€åŒ–åˆ†æ•°ï¼‰
             for (let i = 1; i <= 5; i++) {
                 const normalizedLabel = Math.round(((i - 1) / 4) * 100);
                 const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                 text.setAttribute('x', centerX + 5);
                 text.setAttribute('y', centerY - (radius * i) / 5 + 3);
                 text.setAttribute('fill', '#999');
                 text.setAttribute('font-size', '10');
                 text.setAttribute('font-family', 'Arial, sans-serif');
                 text.textContent = normalizedLabel.toString();
                 svg.appendChild(text);
             }

             // ç»˜åˆ¶æ•°æ®å¤šè¾¹å½¢
             let polygonPoints = '';
             const dataPoints = [];
             
             dimensionNames.forEach((dimension, index) => {
                 const score = dimensionScores[dimension];
                 const angle = index * angleStep - Math.PI / 2;
                 const distance = (score / 5) * radius;
                 const x = centerX + Math.cos(angle) * distance;
                 const y = centerY + Math.sin(angle) * distance;
                 
                 polygonPoints += `${x},${y} `;
                 dataPoints.push({ x, y });
             });

             // å¡«å……å¤šè¾¹å½¢
             const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
             polygon.setAttribute('points', polygonPoints.trim());
             polygon.setAttribute('fill', 'rgba(102, 126, 234, 0.2)');
             polygon.setAttribute('stroke', '#667eea');
             polygon.setAttribute('stroke-width', '3');
             polygon.setAttribute('stroke-linejoin', 'round');
             svg.appendChild(polygon);

             // ç»˜åˆ¶æ•°æ®ç‚¹
             dataPoints.forEach(point => {
                 const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                 circle.setAttribute('cx', point.x);
                 circle.setAttribute('cy', point.y);
                 circle.setAttribute('r', '5');
                 circle.setAttribute('fill', '#667eea');
                 svg.appendChild(circle);
             });

             // ç»˜åˆ¶ç»´åº¦æ ‡ç­¾
             dimensionNames.forEach((dimension, index) => {
                 const angle = index * angleStep - Math.PI / 2;
                 const x = centerX + Math.cos(angle) * labelDistance;
                 const y = centerY + Math.sin(angle) * labelDistance;
                 
                 const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                 text.setAttribute('x', x);
                 text.setAttribute('y', y);
                 text.setAttribute('fill', '#333');
                 text.setAttribute('font-size', '12');
                 text.setAttribute('font-weight', '500');
                 text.setAttribute('font-family', 'Arial, Microsoft YaHei, sans-serif');
                 text.setAttribute('text-anchor', 'middle');
                 text.setAttribute('dominant-baseline', 'middle');
                 text.textContent = dimension;
                 svg.appendChild(text);
             });

            // æ¸…ç©ºå®¹å™¨å¹¶æ·»åŠ SVG
            container.innerHTML = '';
            container.appendChild(svg);
        }

        // ç”ŸæˆAIåˆ†æ
        async function generateAIAnalysis(results) {
            const aiContainer = document.getElementById('ai-analysis-container');
            if (!aiContainer) return;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            aiContainer.innerHTML = `
                <div class="ai-loading">
                    <div class="loading-spinner"></div>
                    <p>æ­£åœ¨ç”ŸæˆAIæ·±åº¦åˆ†æ...</p>
                </div>
            `;
            
            try {
                // å‡†å¤‡æ•°æ®
                const normalizedScore = Math.round(((results.total - 1) / 4) * 100);
                const normalizedDimensions = {};
                Object.keys(results.dimensions).forEach(dimension => {
                    const score = results.dimensions[dimension];
                    normalizedDimensions[dimension] = Math.round(((score - 1) / 4) * 100);
                });
                
                // æ„å»ºPrompt
                const prompt = `ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ€§å¿ƒç†å¥åº·å’¨è¯¢å¸ˆã€‚è¯·æ ¹æ®ä»¥ä¸‹æµ‹è¯•ç»“æœï¼Œæ’°å†™ä¸€ä»½å¿ƒç†åˆ†ææŠ¥å‘Šï¼š

æµ‹è¯•ç»“æœï¼š
æ€»åˆ†ï¼š${normalizedScore}/100
å„ç»´åº¦å¾—åˆ†ï¼š
- è§‚å¿µç¾è€»æ„Ÿï¼š${normalizedDimensions['è§‚å¿µç¾è€»æ„Ÿ']}/100  
- èº«ä½“æ¥çº³åº¦ï¼š${normalizedDimensions['èº«ä½“æ¥çº³åº¦']}/100
- æ²Ÿé€šè‡ªä¸»æ€§ï¼š${normalizedDimensions['æ²Ÿé€šè‡ªä¸»æ€§']}/100
- æ¬²æœ›è‡ªä¸»æ€§ï¼š${normalizedDimensions['æ¬²æœ›è‡ªä¸»æ€§']}/100
- çŸ¥è¯†å¼€æ”¾æ€§ï¼š${normalizedDimensions['çŸ¥è¯†å¼€æ”¾æ€§']}/100

å¾—åˆ†è¶Šé«˜ä»£ç å…¶ç»´åº¦çš„ç¨‹åº¦è¶Šé«˜ï¼Œè¯·æä¾›ä»¥ä¸‹å†…å®¹ï¼š

è¯·ä»ä»¥ä¸‹è§’åº¦æ’°å†™æŠ¥å‘Šï¼š
1. æ€»ä½“å¿ƒç†ç‰¹å¾ä¸äººæ ¼ç”»åƒ  
2. ä¼˜ç‚¹  
3. å¯èƒ½çš„é£é™©  
4. å¿ƒç†æˆé•¿å»ºè®®ï¼ˆå¦‚ä½•å…‹æœå’Œæ”¹å–„æ€§å‹æŠ‘ï¼‰  

è¯­æ°”ï¼šæ¸©å’Œã€å®¢è§‚ã€å…·å¯å‘æ€§  
é•¿åº¦ï¼šçº¦800å­—  
ä¸è¦æåŠâ€œAIâ€æˆ–â€œæµ‹è¯•é¢˜â€ï¼Œä»¥â€œå¿ƒç†å’¨è¯¢æŠ¥å‘Šâ€çš„è¯­æ°”æ’°å†™ã€‚`;

                

                // è°ƒç”¨é€šä¹‰åƒé—®API
                const response = await fetch('https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer sk-729c16f59e8e4295bec0ba0ac4d6a61e'
                    },
                    body: JSON.stringify({
                        model: 'qwen-turbo',
                        messages: [
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 1000
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error?.message || `APIé”™è¯¯: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.choices && data.choices[0] && data.choices[0].message) {
                    const content = data.choices[0].message.content;
                    
                    // æ˜¾ç¤ºåˆ†æç»“æœ
                    aiContainer.innerHTML = `
                        <div class="ai-analysis-content">
                            ${formatMarkdown(content)}
                        </div>
                    `;
                } else {
                    throw new Error('APIè¿”å›æ ¼å¼é”™è¯¯');
                }
            } catch (error) {
                console.error('AIåˆ†æé”™è¯¯:', error);
                aiContainer.innerHTML = `
                    <div class="ai-error">
                        <p>âš ï¸ AIåˆ†æç”Ÿæˆå¤±è´¥</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">${error.message}</p>
                        <button onclick="retryAIAnalysis()">é‡æ–°ç”Ÿæˆ</button>
                    </div>
                `;
            }
        }

        // ä¼˜åŒ–çš„Markdownæ ¼å¼åŒ–å‡½æ•°
        function formatMarkdown(text) {
            if (!text) return '';
            
            // æŒ‰æ®µè½åˆ†å‰²
            let paragraphs = text.split(/\n\n+/);
            
            let html = '';
            paragraphs.forEach(para => {
                para = para.trim();
                if (!para) return;
                
                // å¤„ç†åˆ—è¡¨
                if (para.match(/^[\d]+\.\s/m) || para.match(/^[-*]\s/m)) {
                    const items = para.split('\n').map(line => {
                        line = line.trim();
                        // ç§»é™¤åˆ—è¡¨æ ‡è®°
                        line = line.replace(/^[\d]+\.\s/, '').replace(/^[-*]\s/, '');
                        // å¤„ç†åŠ ç²—
                        line = line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                        return `<li>${line}</li>`;
                    }).join('');
                    
                    if (para.match(/^[\d]+\.\s/m)) {
                        html += `<ol>${items}</ol>`;
                    } else {
                        html += `<ul>${items}</ul>`;
                    }
                } else {
                    // å¤„ç†åŠ ç²—ï¼ˆæ ‡é¢˜ï¼‰
                    para = para.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    // å¤„ç†æ¢è¡Œ
                    para = para.replace(/\n/g, '<br>');
                    html += `<p>${para}</p>`;
                }
            });
            
            return html;
        }

        // é‡è¯•AIåˆ†æ
        function retryAIAnalysis() {
            // é‡æ–°è®¡ç®—ç»“æœå¹¶è°ƒç”¨AIåˆ†æ
            const results = calculateResults();
            generateAIAnalysis(results);
        }
    </script>
</body>
</html>
